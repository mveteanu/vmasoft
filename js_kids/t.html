<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="lib/p5.js"></script>
    <script src="lib/p5.sound.js"></script>
    <script src="lib/p5.play_.js"></script>
    
</head>

<script>

var buff;

function setup()
{
    createCanvas(800, 600);
    background('lightgreen');

    buff = createGraphics(800, 600);
    buff.pixelDensity(1);

    o = buff;
    var obj = dostuff(o);
    obj.loop();

    var x = bufferEmpty(buff);
    console.log(x);
}


function dostuff(o)
{
    with(o)
    {
        ellipse(100, 100, 30);
    }
        function loop()
        {
            ellipse(300, 100, 30);
        }

    return {
        loop : loop
    }   

}


// function dostuff(_o)
// {
//     var o = _o;

//     with(o)
//     {
//         ellipse(100, 100, 30);

//         function loop()
//         {
//             ellipse(300, 100, 30);
//         }

//         function seto(_o)
//         {
//             o = _o;
//         }
//     }

//     return {
//         loop : loop,
//         seto : seto
//     }
// }

function bufferEmpty(buff)
{
    buff.loadPixels();

    for(var i = 0; i < buff.pixels.length; i++)
    {
        if (buff.pixels[i] != 0)
            return false;
    }

    return true;
}

</script>

</html>

